<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="utf-8">
    <title>个人主页</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" th:href="@{/layuiadmin/layui/css/layui.css}" media="all">
    <link rel="stylesheet" th:href="@{/layuiadmin/style/admin.css}" media="all">
    <link rel="stylesheet" th:href="@{/layuiadmin/style/template.css}" media="all">
    <style>
        iframe {
            /*border: blue 1px solid;*/
            width: 100%;
            height: 600px;
        }

        #haha {
            float: right;
            margin-right: 15px;
        }

        #navigationBar {
            margin-left: 15px;
            margin-right: 15px;
        }

        #iframediv {
            /*border: red 1px solid;*/
            height: 100%;
        }
    </style>
</head>
<body>
<div id="app">
    <!--个人信息页面-->
    <div class="layui-fluid layadmin-homepage-fluid">
        <div class="layui-row layui-col-space8">
            <div class="layui-col-md2">
                <div class="layadmin-homepage-panel layadmin-homepage-shadow">
                    <div class="layui-card text-center">
                        <div class="layui-card-body">
                            <div class="layadmin-homepage-pad-ver">
                                <img class="layadmin-homepage-pad-img"
                                     th:src="@{${session.avatar}}" width="96" height="96">
                            </div>
                            <h4 class="layadmin-homepage-font">
                                <shiro:principal property="username"/>
                            </h4>
                            <p class="layadmin-homepage-min-font">二手市场用户</p>
                            <div class="layadmin-homepage-pad-ver">
                                <a href="javascript:;" class="layui-icon layui-icon-cellphone"></a>
                                <a href="javascript:;" class="layui-icon layui-icon-vercode"></a>
                                <a href="javascript:;" class="layui-icon layui-icon-login-wechat"></a>
                                <a href="javascript:;" class="layui-icon layui-icon-login-qq"></a>
                            </div>
                        </div>
                    </div>
                    <p class="layadmin-homepage-about">
                        关于我
                    </p>
                    <ul class="layadmin-homepage-list-group">
                        <li class="list-group-item"><i class="layui-icon layui-icon-location"></i>
                            <shiro:principal property="address"/>
                        </li>
                        <li class="list-group-item"><a href="javascript:;" class="color"><i
                                class="layui-icon layui-icon-snowflake"></i><span style="word-wrap:break-word;">https://space.bilibili.com/13506128</span></a>
                        </li>
                    </ul>
                    <p class="layadmin-homepage-about">
                        标签
                    </p>
                    <ul class="layadmin-homepage-list-inline">
                        <a href="javascript:;" class="layui-btn layui-btn-primary">用户</a>
                        <a href="javascript:;" class="layui-btn layui-btn-primary">商家</a>
                    </ul>
                </div>
            </div>
            <div class="layui-col-md10">
                <div class="layui-fluid layadmin-homepage-content">
                    <div class="layui-row layui-col-space20 layadmin-homepage-list-imgtxt">
                        <div class="layui-col-md9">
                            <!--<div id="haha">
                                <a th:href="@{/order/all/delivery}" target="order-iframe"
                                   class="layui-btn layui-btn-normal">收货订单</a>
                                <a th:href="@{/order/all/shipping}" target="order-iframe"
                                   class="layui-btn layui-btn-normal">发货订单</a>
                            </div>-->

                            <!--订单预览页面-->
                            <div id="navigationBar">
                                <ul class="layui-nav layui-bg-blue" lay-filter="component-nav">

                                    <li class="layui-nav-item layui-this"><a th:href="@{/order/all/delivery}"
                                                                             target="order-iframe">收货订单</a></li>
                                    <li class="layui-nav-item"><a th:href="@{/order/all/shipping}"
                                                                  target="order-iframe">发货订单</a></li>
                                    <li class="layui-nav-item"><a th:href="@{/order/list}" target="_self">订单详情</a></li>
                                </ul>
                            </div>

                            <div id="iframediv">
                                <iframe th:src="@{/order/all/delivery}" name="order-iframe" frameborder="0"></iframe>
                            </div>

                        </div>
                        <div class="layui-col-md3">
                            <div class="grid-demo">
                                <div class="layui-card homepage-top">
                                    <div class="layui-card-header">
                                        <h3 class="panel-title">
                                            <i class="layui-icon layui-icon-rate-solid"></i>
                                            收藏夹
                                        </h3>
                                    </div>
                                    <div class="layui-card-body">
                                        <div class="layui-row layui-col-space15">
                                            <!--收藏的商品-->
                                            <div class="layui-col-md4" v-for="goods in favoriteGoods">
                                                <img :src="imgURL+goods.picture">
                                            </div>
                                            <div class="layui-col-md12 margin-top10">
                                                <a th:href="@{/favorite/detail}" target="_self"
                                                   class="layui-btn layui-btn-primary">更多</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="layui-card homepage-bottom">
                                    <div class="layui-card-header">
                                        <h3 class="panel-title">
                                            <i class="layui-icon layui-icon-user"></i>
                                            私信
                                        </h3>
                                    </div>
                                    <div class="layui-card-body">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/vue.js}"></script>
<script th:src="@{/js/axios.js}"></script>
<script th:src="@{/layuiadmin/layui/layui.js}"></script>
<script th:src="@{/js/globalVar.js}"></script>
<script>
    layui.config({
        base: preURL + '/layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index']);

    let app = new Vue({
        el: "#app",
        data: {
            imgURL: goodsImageUrl,
            favoriteGoods: null,
        },
        created() {
            this.getFavorite();
        },
        methods: {
            getFavorite() {
                let that = this;
                axios.get(preURL + '/favorite/all').then(res => {
                    that.favoriteGoods = res.data.data;
                }, err => {
                    console.log(err);
                })
            }
        }
    });
</script>
</body>
</html>